/* src/styles/components/testimonials.css */

/* ===================================
   Base Layer - Testimonials Section Foundation
   =================================== */
@layer base {
  .testimonials-section {
    @apply py-16 bg-gray-50;
    background-color: var(--color-background, #f9f6f2);
  }
  
  .testimonials-container {
    @apply container mx-auto px-4;
  }
  
  .testimonials-header {
    @apply text-center mb-12;
  }
  
  .testimonials-title {
    @apply text-3xl lg:text-4xl font-bold mb-4;
    color: var(--color-text, #232323);
  }
  
  .testimonials-subtitle {
    @apply text-xl text-gray-600;
    color: var(--color-text-muted, #7c6baf);
  }
}

/* ===================================
   Component Layer - Testimonials Components
   =================================== */
@layer components {
  /* Grid Layout */
  .testimonials-grid {
    @apply grid grid-cols-1 md:grid-cols-3 gap-8;
  }
  
  /* Testimonial Card */
  .testimonials-card {
    @apply bg-white rounded-2xl p-8 shadow-lg relative overflow-hidden transition-all duration-300;
    background-color: var(--color-surface, #fff);
    transform: translateY(0);
  }
  
  .testimonials-card:hover {
    @apply shadow-xl;
    transform: translateY(-4px);
  }
  
  /* Author Section */
  .testimonials-author {
    @apply flex items-center mb-6;
  }
  
  .testimonials-avatar {
    @apply w-16 h-16 rounded-full mr-4 object-cover ring-2 ring-offset-2;
    ring-color: var(--color-primary, #5b4b8a);
  }
  
  .testimonials-author-info {
    @apply flex-1;
  }
  
  .testimonials-author-name {
    @apply font-semibold text-gray-900;
    color: var(--color-text, #232323);
  }
  
  .testimonials-author-role {
    @apply text-gray-600 text-sm;
    color: var(--color-text-muted, #7c6baf);
  }
  
  /* Rating */
  .testimonials-rating {
    @apply flex text-yellow-400 mb-4 gap-1;
  }
  
  .testimonials-star {
    @apply text-xl transition-transform duration-200;
  }
  
  .testimonials-card:hover .testimonials-star {
    animation: starBounce 0.6s ease-out;
  }
  
  .testimonials-star:nth-child(1) { animation-delay: 0s; }
  .testimonials-star:nth-child(2) { animation-delay: 0.1s; }
  .testimonials-star:nth-child(3) { animation-delay: 0.2s; }
  .testimonials-star:nth-child(4) { animation-delay: 0.3s; }
  .testimonials-star:nth-child(5) { animation-delay: 0.4s; }
  
  /* Content */
  .testimonials-content {
    @apply text-gray-600 italic leading-relaxed;
    color: var(--color-text-muted, #7c6baf);
    position: relative;
    z-index: 2;
  }
  
  /* Quote Icon */
  .testimonials-quote-icon {
    @apply absolute bottom-4 right-4 opacity-10;
  }
  
  .testimonials-quote {
    @apply text-8xl;
    color: var(--color-primary, #5b4b8a);
  }
  
  /* Navigation Dots */
  .testimonials-dots {
    @apply flex justify-center items-center gap-2 mt-8;
  }
  
  .testimonials-dot {
    @apply w-3 h-3 rounded-full bg-gray-300 transition-all duration-300;
    background-color: color-mix(in srgb, var(--color-text-muted) 30%, transparent);
  }
  
  .testimonials-dot:hover {
    @apply bg-gray-400;
    transform: scale(1.2);
  }
  
  .testimonials-dot--active {
    @apply w-8 bg-indigo-600;
    background-color: var(--color-primary, #5b4b8a);
  }
}

/* ===================================
   Utilities Layer - Variant Specific
   =================================== */
@layer utilities {
  /* Rock Electric variant */
  [data-current-variant="rockelectric"] .testimonials-section {
    background-color: var(--color-background, #191b1f);
  }
  
  [data-current-variant="rockelectric"] .testimonials-card {
    background-color: var(--color-surface, #23272a);
    @apply border border-gray-800;
  }
  
  [data-current-variant="rockelectric"] .testimonials-star {
    color: var(--color-accent, #ffd600);
  }
  
  [data-current-variant="rockelectric"] .testimonials-quote {
    color: var(--color-accent, #ffd600);
  }
  
  /* EDM Neon variant */
  [data-current-variant="edmneon"] .testimonials-section {
    background-color: var(--color-background, #18182b);
  }
  
  [data-current-variant="edmneon"] .testimonials-card {
    background-color: var(--color-surface, #23234b);
    @apply border border-gray-800;
    position: relative;
  }
  
  [data-current-variant="edmneon"] .testimonials-card::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(45deg, 
      var(--color-primary) 0%, 
      var(--color-accent) 50%, 
      var(--color-secondary) 100%
    );
    border-radius: 1rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
  }
  
  [data-current-variant="edmneon"] .testimonials-card:hover::before {
    opacity: 1;
    filter: blur(10px);
  }
  
  [data-current-variant="edmneon"] .testimonials-star {
    color: var(--color-primary, #00ffb0);
    text-shadow: 0 0 10px currentColor;
  }
  
  /* Pop Shine variant */
  [data-current-variant="popshine"] .testimonials-card {
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, 
                  color-mix(in srgb, var(--color-primary) 20%, transparent) 0%, 
                  color-mix(in srgb, var(--color-secondary) 20%, transparent) 100%
                ) border-box;
    border: 2px solid transparent;
  }
  
  [data-current-variant="popshine"] .testimonials-avatar {
    ring-color: var(--color-primary, #ff4c98);
  }
  
  [data-current-variant="popshine"] .testimonials-star {
    color: var(--color-primary, #ff4c98);
  }
  
  /* Classic Gold variant */
  [data-current-variant="classicgold"] .testimonials-card {
    @apply border border-gray-200;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
  }
  
  [data-current-variant="classicgold"] .testimonials-card:hover {
    border-color: var(--color-secondary, #e3c16f);
  }
  
  [data-current-variant="classicgold"] .testimonials-star {
    color: var(--color-secondary, #e3c16f);
  }
  
  [data-current-variant="classicgold"] .testimonials-quote {
    color: var(--color-secondary, #e3c16f);
  }
  
  /* Rasta Vibes variant */
  [data-current-variant="rastavibes"] .testimonials-card:nth-child(1) .testimonials-avatar {
    ring-color: var(--color-primary, #e02424);
  }
  
  [data-current-variant="rastavibes"] .testimonials-card:nth-child(2) .testimonials-avatar {
    ring-color: var(--color-secondary, #ffd600);
  }
  
  [data-current-variant="rastavibes"] .testimonials-card:nth-child(3) .testimonials-avatar {
    ring-color: var(--color-accent, #00a651);
  }
  
  [data-current-variant="rastavibes"] .testimonials-star {
    color: var(--color-secondary, #ffd600);
  }
  
  /* Jazz Blue variant */
  [data-current-variant="jazzyblue"] .testimonials-card {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  [data-current-variant="jazzyblue"] .testimonials-card:hover {
    transform: translateY(-8px) rotate(-1deg);
  }
  
  [data-current-variant="jazzyblue"] .testimonials-content {
    font-family: Georgia, serif;
  }
}

/* ===================================
   Animations
   =================================== */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes starBounce {
  0%, 100% { transform: scale(1) rotate(0deg); }
  50% { transform: scale(1.3) rotate(15deg); }
}

@keyframes quoteFloat {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-10px) rotate(5deg); }
}

/* Apply entrance animations */
.testimonials-card {
  animation: fadeInUp 0.8s ease-out;
  animation-fill-mode: both;
}

.testimonials-card:nth-child(1) { animation-delay: 0.1s; }
.testimonials-card:nth-child(2) { animation-delay: 0.2s; }
.testimonials-card:nth-child(3) { animation-delay: 0.3s; }

/* Quote icon animation */
.testimonials-card:hover .testimonials-quote {
  animation: quoteFloat 3s ease-in-out infinite;
}

/* Avatar hover effect */
.testimonials-avatar {
  transition: all 0.3s ease;
}

.testimonials-card:hover .testimonials-avatar {
  transform: scale(1.1);
  box-shadow: 0 0 20px rgba(91, 75, 138, 0.3);
}

/* ===================================
   Carousel Functionality (CSS-only)
   =================================== */
@media (max-width: 767px) {
  .testimonials-grid {
    @apply flex overflow-x-auto snap-x snap-mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  
  .testimonials-grid::-webkit-scrollbar {
    display: none;
  }
  
  .testimonials-card {
    @apply flex-shrink-0 w-full snap-center;
  }
}

/* ===================================
   Interactive States
   =================================== */
/* Card hover with gradient border */
.testimonials-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 1rem;
  padding: 2px;
  background: linear-gradient(45deg, 
    var(--color-primary) 0%, 
    var(--color-secondary) 100%
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.testimonials-card:hover::after {
  opacity: 1;
}

/* ===================================
   Responsive Adjustments
   =================================== */
@media (max-width: 1024px) {
  .testimonials-title {
    @apply text-2xl lg:text-3xl;
  }
  
  .testimonials-subtitle {
    @apply text-lg;
  }
  
  .testimonials-grid {
    @apply gap-6;
  }
  
  .testimonials-card {
    @apply p-6;
  }
}

@media (max-width: 640px) {
  .testimonials-title {
    @apply text-xl;
  }
  
  .testimonials-subtitle {
    @apply text-base;
  }
  
  .testimonials-card {
    @apply p-4;
  }
  
  .testimonials-avatar {
    @apply w-12 h-12;
  }
  
  .testimonials-author-name {
    @apply text-base;
  }
  
  .testimonials-author-role {
    @apply text-xs;
  }
  
  .testimonials-content {
    @apply text-sm;
  }
  
  .testimonials-quote {
    @apply text-6xl;
  }
}

/* ===================================
   Accessibility & Focus States
   =================================== */
.testimonials-card:focus-visible {
  outline: 2px solid var(--color-primary, #5b4b8a);
  outline-offset: 4px;
}

.testimonials-dot:focus-visible {
  outline: 2px solid var(--color-primary, #5b4b8a);
  outline-offset: 2px;
}

/* Screen reader text */
.testimonials-sr-only {
  @apply sr-only;
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .testimonials-card {
    @apply border-2 border-gray-900;
  }
  
  .testimonials-content {
    font-style: normal;
    font-weight: 500;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .testimonials-card,
  .testimonials-star,
  .testimonials-avatar,
  .testimonials-quote,
  .testimonials-dot {
    animation: none !important;
    transition: none !important;
  }
  
  .testimonials-grid {
    scroll-behavior: auto;
  }
}

/* ===================================
   Print Styles
   =================================== */
@media print {
  .testimonials-dots {
    @apply hidden;
  }
  
  .testimonials-grid {
    @apply grid grid-cols-1 gap-4;
  }
  
  .testimonials-card {
    @apply border border-gray-300 shadow-none;
    break-inside: avoid;
  }
  
  .testimonials-quote-icon {
    @apply hidden;
  }
}
